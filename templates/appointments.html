<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthWave</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='static/logo_icon.ico') }}">
    <link rel="stylesheet"  href="{{ url_for('static', filename='css/appointments.css') }}">

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const currentMonth = new Date().getMonth();
            const currentDate = new Date().getDate();
    
            if ((currentMonth === 9) || (currentMonth === 11 && currentDate === 5)) {
                const titleBar = document.querySelector('nav');
                const logoImage = document.querySelector('.logo img');
    
                if (currentMonth === 9) {
                    titleBar.classList.add('november');
                    logoImage.src = "{{ url_for('static', filename='PinkRibbion-Healthwave.png') }}";
                    logoImage.alt = "Pink Ribbon Healthwave Logo";
                } else if (currentMonth === 3 && currentDate === 22) {
                    logoImage.classList.add('water');
                    logoImage.src = "{{ url_for('static', filename='Earth-logo.png') }}";
                    logoImage.alt = "Earth Logo";
                }
            }
        });
    </script>
</head>

<body>
    <nav>
        <div class="logo">
        <a href="{{ url_for('user_profile') }}" rel="final">
            <img src="{{ url_for('static', filename='logoBG.png') }}" alt="Logo">
        </a>
        </div>
        <input type="checkbox" id="toggleDropdown">
        <ul>
            <li><a href="{{ url_for('medications') }}">Medications</a></li>
            <li><a href="{{ url_for('health_logger') }}">Health logger</a></li>
            <li><a href="{{ url_for('appointments') }}">Appointments</a></li>
            <li class="dropdown">
                <label for="toggleDropdown" class="icon" rel="final">
                    <img src="{{ url_for('static', filename='dropdown.png') }}" alt="drop down" style="width: 40px; height: auto; ">
                </label>
                <ul class="dropdown-menu">
                    <li>{{ username }}</li>
                    <li><a href="{{ url_for('about_me') }}">About Me</a></li>
                    <li><a href="{{ url_for('logout') }}">Log out</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <div class="grid-container">

        <div id="title">
            <h1>Appointments</h1>
        </div>

        <div id="content1">
        <form form id="cancelForm" action="/appointments" method="POST">
            <h2>Active Appointments</h2>
            <table>
                <thead>
                    <tr>
                        <th>Appointment ID</th>
                        <th>Your ID</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Doctor's Name</th>
                    </tr>
                </thead>
                <tbody>
                    {% if appointments %}
                        {% for appointment in appointments %}
                            <tr>
                                <td>{{ appointment[0] }}</td>
                                <td>{{ appointment[1] }}</td>
                                <td>{{ appointment[2] }}</td>
                                <td>{{ appointment[3] }}</td>
                                <td>{{ appointment[4] }}</td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="5">No appointments available.</td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
            <button type="submit" class="cancel-btn">Cancel Selected Appointments</button>
        </form>
        </div>

        <div id="content2">
            <form action="/appointments" method="POST">
                <h2>Schedule Appointment</h2>

                <div id="calendar">
                        <div>
                            <label for="appointment-date">Select Date:</label>
                            <input type="date" id="appointment-date" name="appointment_date" min="">
                            <br>
                            <label for="appointment-time">Select Time:</label>
                            <select id="appointment-time" name="slot_time">
                                <!--Time Slots-->
                                <option value="9">9:00 AM</option>
                                <option value="10">10:00 AM</option>
                                <option value="11">11:00 AM</option>
                                <option value="12">12:00 PM</option>
                                <option value="13">1:00 PM</option>
                                <option value="14">2:00 PM</option>
                                <option value="15">3:00 PM</option>
                                <option value="16">4:00 PM</option>
                                <option value="17">5:00 PM</option>
                            </select>
                            <br>
                            <button type="submit" class="schedule-btn">Schedule Appointment</button>
                        </div>
            </form>
            </div>
        </div>

        <div id="content3">
            <h2>Today's Timings for {{ doctor_name }}</h2>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                    </tr>
                </thead>
                <tbody>
                    {% for timing in available_timings %}
                    <tr>
                        <td>{{ timing.date }}</td>
                        <td>{{ timing.time }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <footer>
        footer
    </footer>

</body>

</html>
